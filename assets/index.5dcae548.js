var Ee=Object.defineProperty,Te=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var R=(e,r,t)=>r in e?Ee(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,f=(e,r)=>{for(var t in r||(r={}))ye.call(r,t)&&R(e,t,r[t]);if(q)for(var t of q(r))ge.call(r,t)&&R(e,t,r[t]);return e},E=(e,r)=>Te(e,Ce(r));var h=(e,r,t)=>(R(e,typeof r!="symbol"?r+"":r,t),t);var F=(e,r,t)=>new Promise((o,s)=>{var n=a=>{try{u(t.next(a))}catch(c){s(c)}},i=a=>{try{u(t.throw(a))}catch(c){s(c)}},u=a=>a.done?o(a.value):Promise.resolve(a.value).then(n,i);u((t=t.apply(e,r)).next())});import{r as Oe,o as Q,c as Fe,a as Se,e as V,E as ve,p as Ie,b as $,U as Le,d as Z,m as b,f as De,g as Be,h as Pe,n as Ae,i as we,j as Re,k as L,l as D,q as Ue,s as ke,t as be,u as Me,v as xe}from"./vendor.e517fc6f.js";const Ne=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}};Ne();if(typeof window!="undefined"){let e=function(){var r=document.body,t=document.getElementById("__svg__icons__dom__");t||(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.style.position="absolute",t.style.width="0",t.style.height="0",t.id="__svg__icons__dom__",t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),t.innerHTML='<symbol viewBox="0 0 1024 1024"  id="icon-arrow-down"><path fill="currentColor" d="M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z" /></symbol><symbol viewBox="0 0 1024 1024"  id="icon-arrow-left"><path fill="currentColor" d="M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z" /></symbol><symbol viewBox="0 0 1024 1024"  id="icon-arrow-right"><path fill="currentColor" d="M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z" /></symbol><symbol viewBox="0 0 1024 1024"  id="icon-arrow-up"><path fill="currentColor" d="m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z" /></symbol>',r.insertBefore(t,r.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}var ee=(e,r)=>{const t=e.__vccOpts||e;for(const[o,s]of r)t[o]=s;return t};const je={};function Ge(e,r){const t=Oe("RouterView");return Q(),Fe(t)}var qe=ee(je,[["render",Ge]]);const te=Se();function Ve(e){e.use(te)}function $e(){const{VITE_GLOB_APP_SHORT_NAME:e}=re();return`${e}__${He()}__`.toUpperCase()}function re(){return{VITE_USE_MOCK:"false",VITE_USE_PWA:"false",VITE_PUBLIC_PATH:"/",VITE_DROP_CONSOLE:"true",VITE_BUILD_COMPRESS:"none",VITE_BUILD_COMPRESS_DELETE_ORIGIN_FILE:"false",VITE_LEGACY:"false",VITE_GLOB_API_URL:"/basic-api",VITE_GLOB_API_URL_PREFIX:"",VITE_GLOB_API_URL_OTHER:"https://example.com/xx/yy",VITE_PORT:"3100",VITE_GLOB_APP_TITLE:"Vitesse Admin",VITE_GLOB_APP_SHORT_NAME:"vitesse_admin",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}}function He(){return"production"}function Ke(){return!1}class We{constructor(r={}){h(this,"key");h(this,"iv");const{key:t,iv:o}=r;t&&(this.key=V.exports.parse(t)),o&&(this.iv=V.exports.parse(o))}get getOptions(){return{mode:ve,padding:Ie,iv:this.iv}}encryptByAES(r){return $.exports.encrypt(r,this.key,this.getOptions).toString()}decryptByAES(r){return $.exports.decrypt(r,this.key,this.getOptions).toString(Le)}}const Ye=Object.prototype.toString;function ze(e,r){return Ye.call(e)===`[object ${r}]`}function Je(e){return typeof e!="undefined"}function Xe(e){return!Je(e)}function Qe(e){return e===null}function H(e){return Xe(e)||Qe(e)}function U(e){return ze(e,"String")}function m(e){return typeof e=="function"}function Ze(e){return e&&Array.isArray(e)}const et=({prefixKey:e="",storage:r=sessionStorage,key:t="",iv:o="",timeout:s=null,hasEncrypt:n=!1}={})=>{if(n&&[t.length,o.length].some(a=>a!==16))throw new Error("When hasEncrypt is true, the key or iv must be 16 bits!");const i=new We({key:t,iv:o}),u=class{constructor(){h(this,"storage");h(this,"prefixKey");h(this,"encryption");h(this,"hasEncrypt");this.storage=r,this.prefixKey=e,this.encryption=i,this.hasEncrypt=n}getKey(c){return`${this.prefixKey}${c}`.toUpperCase()}set(c,p,l=s){const d=JSON.stringify({value:p,time:Date.now(),expire:H(l)?null:new Date().getTime()+l*1e3}),w=this.hasEncrypt?this.encryption.encryptByAES(d):d;this.storage.setItem(this.getKey(c),w)}get(c,p=null){const l=this.storage.getItem(this.getKey(c));if(!l)return p;try{const d=this.hasEncrypt?this.encryption.decryptByAES(l):l,w=JSON.parse(d),{value:me,expire:G}=w;if(H(G)||G>=new Date().getTime())return me;this.remove(c)}catch(d){return p}}remove(c){this.storage.removeItem(this.getKey(c))}clear(){this.storage.clear()}};return new u},tt=(e,r={})=>f({storage:e,prefixKey:$e()},r),oe=(e=sessionStorage,r={})=>et(tt(e,r)),rt=(e={})=>oe(sessionStorage,e),ot=(e={})=>oe(localStorage,e);var M=(e=>(e.DARK="dark",e.LIGHT="light",e))(M||{});const k="TOKEN__KEY",K="USER__INFO__KEY",W="USER__ROLE__KEY",T="PROJECT__CONFIG__KEY";var x=(e=>(e[e.LOCAL=0]="LOCAL",e[e.SESSION=1]="SESSION",e))(x||{});const se={permissionCacheType:x.LOCAL,grayMode:!1,weakMode:!1,themeMode:M.LIGHT,useErrorHandle:!1,useOpenBackTop:!0},ne=60*60*24*7,B={iv:"@11111000001111_",key:"_11111000001111@"},ie=!Ke(),ue=ot({iv:B.iv,key:B.key,hasEncrypt:ie,timeout:ne}),ae=rt({iv:B.iv,key:B.key,hasEncrypt:ie,timeout:ne}),ce=se.permissionCacheType===x.LOCAL;function st(){return g(k)}function g(e){return ce?ue.get(e):ae.get(e)}function y(e,r){return ce?ue.set(e,r):ae.set(e,r)}function nt(e){e?document.documentElement.classList.add("gray-mode"):document.documentElement.classList.remove("gray-mode")}function it(e){e?document.documentElement.classList.add("weak-mode"):document.documentElement.classList.remove("weak-mode")}function ut(e){document.documentElement.classList.remove(...Object.values(M)),document.documentElement.classList.add(e)}const at=Z({id:"app",state:()=>({projectConfig:g(T)}),getters:{getProjectConfig(){return this.projectConfig||g(T)}},actions:{setGrayMode(e){this.projectConfig.grayMode=e,nt(e),y(T,this.projectConfig)},setWeakMode(e){this.projectConfig.weakMode=e,it(e),y(T,this.projectConfig)},setThemeMode(e){this.projectConfig.themeMode=e,ut(e),y(T,this.projectConfig)},setProjectConfig(e){this.projectConfig=b(this.projectConfig||{},e),y(T,this.projectConfig)}}});function ct(e){const r=at(),t=g(T),o=b(se,t||{});r.setProjectConfig(o),r.setGrayMode(o.grayMode),r.setWeakMode(o.weakMode),r.setThemeMode(o.themeMode)}const lt=(e,r)=>{const t=e;return t.install=o=>{o.component(t.name||t.displayName,e),r&&(o.config.globalProperties[r]=e)},e};function dt(e,r){let t="";for(const o in r)t+=o+"="+encodeURIComponent(r[o])+"&";return t=t.replace(/&$/,""),/\?$/.test(e)?e+t:e.replace(/\/?$/,"?")+t}const pt=De({name:"VaButton",props:{type:{type:String,default:"default"}}});function ht(e,r,t,o,s,n){return Q(),Be("div",{class:Ae(["button",e.$props.type])},[Pe(e.$slots,"default")],2)}var ft=ee(pt,[["render",ht]]);const _t=lt(ft);function mt(e){e.use(_t)}const Et="modulepreload",Y={},Tt="/",O=function(r,t){return!t||t.length===0?r():Promise.all(t.map(o=>{if(o=`${Tt}${o}`,o in Y)return;Y[o]=!0;const s=o.endsWith(".css"),n=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const i=document.createElement("link");if(i.rel=s?"stylesheet":Et,s||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),s)return new Promise((u,a)=>{i.addEventListener("load",u),i.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>r())},le=()=>O(()=>import("./index.e9471811.js"),["assets/index.e9471811.js","assets/index.aabb649e.css","assets/vendor.e517fc6f.js"]);var I=(e=>(e.SUPER="super",e.TEST="test",e))(I||{});const Ct={path:"/dashboard",name:"Dashboard",component:le,redirect:"/dashboard/analysis",meta:{title:"\u603B\u89C8",roles:[I.SUPER]},children:[{path:"analysis",name:"DashboardAnalysis",component:()=>O(()=>import("./index.b82da52d.js"),["assets/index.b82da52d.js","assets/vendor.e517fc6f.js"]),meta:{title:"\u5206\u6790\u9875",roles:[I.SUPER]}},{path:"workbench",name:"DashboardWorkbench",component:()=>O(()=>import("./index.f9d6ca7d.js"),["assets/index.f9d6ca7d.js","assets/vendor.e517fc6f.js"]),meta:{title:"\u5DE5\u4F5C\u53F0",roles:[I.SUPER]}}]};var yt=Object.freeze(Object.defineProperty({__proto__:null,default:Ct},Symbol.toStringTag,{value:"Module"}));const gt={path:"/mine",name:"Mine",component:le,redirect:"/mine/data",meta:{title:"\u6211\u7684"},children:[{path:"data",name:"MineData",component:()=>O(()=>import("./index.2538413c.js"),["assets/index.2538413c.js","assets/vendor.e517fc6f.js"]),meta:{title:"\u8D44\u6599"}},{path:"follow",name:"MineFollow",component:()=>O(()=>import("./index.44c40b59.js"),["assets/index.44c40b59.js","assets/vendor.e517fc6f.js"]),meta:{title:"\u5173\u6CE8"}}]};var Ot=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"}));const Ft={path:"/",name:"Root",redirect:"/mine",meta:{title:"Root",ignoreAuth:!0}},St={path:"/login",name:"Login",component:()=>O(()=>import("./index.a698bb66.js"),["assets/index.a698bb66.js","assets/index.e55fe0e7.css","assets/vendor.e517fc6f.js"]),meta:{title:"\u767B\u5F55",ignoreAuth:!0}},vt={path:"/:path(.*)*",name:"NotFound",component:()=>O(()=>import("./index.e9cb6b35.js"),["assets/index.e9cb6b35.js","assets/vendor.e517fc6f.js"]),meta:{title:"\u672A\u627E\u5230\u9875\u9762",ignoreAuth:!0}},z={"./modules/dashboard.ts":yt,"./modules/mine.ts":Ot},de=[];Object.keys(z).forEach(e=>{const r=z[e].default||{},t=Array.isArray(r)?[...r]:[r];de.push(...t)});const It=de,Lt=[Ft,St,vt],P=we({history:Re("/"),routes:[...It,...Lt],strict:!0,scrollBehavior:()=>({left:0,top:0})});function Dt(e){e.use(P)}var v=(e=>(e.BASE_LOGIN="/login",e.BASE_HOME="/dashboard",e))(v||{}),pe=(e=>(e[e.SUCCESS=200]="SUCCESS",e[e.ERROR=-1]="ERROR",e[e.TIMEOUT=401]="TIMEOUT",e.TYPE="success",e))(pe||{}),C=(e=>(e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE",e))(C||{}),A=(e=>(e.JSON="application/json;charset=UTF-8",e.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",e.FORM_DATA="multipart/form-data;charset=UTF-8",e))(A||{}),S=(e=>(e.operationFailed="\u64CD\u4F5C\u5931\u8D25",e.errorTip="\u9519\u8BEF\u63D0\u793A",e.errorMessage="\u64CD\u4F5C\u5931\u8D25,\u7CFB\u7EDF\u5F02\u5E38!",e.timeoutMessage="\u767B\u5F55\u8D85\u65F6,\u8BF7\u91CD\u65B0\u767B\u5F55!",e.apiTimeoutMessage="\u63A5\u53E3\u8BF7\u6C42\u8D85\u65F6,\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5!",e.apiRequestFailed="\u8BF7\u6C42\u51FA\u9519\uFF0C\u8BF7\u7A0D\u5019\u91CD\u8BD5",e.networkException="\u7F51\u7EDC\u5F02\u5E38",e.networkExceptionMsg="\u7F51\u7EDC\u5F02\u5E38\uFF0C\u8BF7\u68C0\u67E5\u60A8\u7684\u7F51\u7EDC\u8FDE\u63A5\u662F\u5426\u6B63\u5E38!",e.errMsg401="\u7528\u6237\u6CA1\u6709\u6743\u9650\uFF08\u4EE4\u724C\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\u9519\u8BEF\uFF09!",e.errMsg403="\u7528\u6237\u5F97\u5230\u6388\u6743\uFF0C\u4F46\u662F\u8BBF\u95EE\u662F\u88AB\u7981\u6B62\u7684\u3002!",e.errMsg404="\u7F51\u7EDC\u8BF7\u6C42\u9519\u8BEF,\u672A\u627E\u5230\u8BE5\u8D44\u6E90!",e.errMsg405="\u7F51\u7EDC\u8BF7\u6C42\u9519\u8BEF,\u8BF7\u6C42\u65B9\u6CD5\u672A\u5141\u8BB8!",e.errMsg408="\u7F51\u7EDC\u8BF7\u6C42\u8D85\u65F6!",e.errMsg500="\u670D\u52A1\u5668\u9519\u8BEF,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458!",e.errMsg501="\u7F51\u7EDC\u672A\u5B9E\u73B0!",e.errMsg502="\u7F51\u7EDC\u9519\u8BEF!",e.errMsg503="\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4!",e.errMsg504="\u7F51\u7EDC\u8D85\u65F6!",e.errMsg505="http\u7248\u672C\u4E0D\u652F\u6301\u8BE5\u8BF7\u6C42!",e))(S||{});let _=new Map;const J=e=>[e.method,e.url].join("&");class Bt{addPending(r){this.removePending(r);const t=J(r);r.cancelToken=r.cancelToken||new L.CancelToken(o=>{_.has(t)||_.set(t,o)})}removeAllPending(){_.forEach(r=>{r&&m(r)&&r()}),_.clear()}removePending(r){const t=J(r);if(_.has(t)){const o=_.get(t);o&&o(t),_.delete(t)}}reset(){_=new Map}}class Pt{constructor(r){h(this,"axiosInstance");h(this,"options");this.options=r,this.axiosInstance=L.create(r),this.setupInterceptors()}getAxios(){return this.axiosInstance}setHeader(r){!this.axiosInstance||D(this.axiosInstance.defaults.headers,r)}getTransform(){return this.options.transform}supportFormData(r){var s;const t=r.headers||this.options.headers;return((t==null?void 0:t["Content-Type"])||(t==null?void 0:t["content-type"]))!==A.FORM_URLENCODED||!Reflect.has(r,"data")||((s=r.method)==null?void 0:s.toUpperCase())===C.GET?r:E(f({},r),{data:Ue.stringify(r.data,{arrayFormat:"brackets"})})}setupInterceptors(){const r=this.getTransform();if(!r)return;const{requestInterceptors:t,requestInterceptorsCatch:o,responseInterceptors:s,responseInterceptorsCatch:n}=r,i=new Bt;this.axiosInstance.interceptors.request.use(u=>{var l,d;const a=(l=u.requestOptions)==null?void 0:l.isCancelToken,c=(d=this.options.requestOptions)==null?void 0:d.isCancelToken;return(a!==void 0?a:c)&&i.addPending(u),t&&m(t)&&(u=t(u)),u},void 0),o&&m(o)&&this.axiosInstance.interceptors.request.use(void 0,o),this.axiosInstance.interceptors.response.use(u=>(u&&i.removePending(u.config),s&&m(s)&&(u=s(u)),u),void 0),n&&m(n)&&this.axiosInstance.interceptors.response.use(void 0,n)}uploadFile(r,t){const o=new window.FormData,s=t.name||"file";return t.filename?o.append(s,t.file,t.filename):o.append(s,t.file),t.data&&Object.keys(t.data).forEach(n=>{const i=t.data[n];if(Array.isArray(i)){i.forEach(u=>{o.append(`${n}[]`,u)});return}o.append(n,t.data[n])}),this.axiosInstance.request(E(f({},r),{method:"POST",data:o,headers:{"Content-type":A.FORM_DATA,ignoreCancelToken:!0}}))}get(r,t){return this.request(E(f({},r),{method:C.GET}),t)}post(r,t){return this.request(E(f({},r),{method:C.POST}),t)}put(r,t){return this.request(E(f({},r),{method:C.PUT}),t)}delete(r,t){return this.request(E(f({},r),{method:C.DELETE}),t)}request(r,t){const{beforeRequestHook:o,afterRequestHook:s,requestCatchHook:n}=this.getTransform()||{};let i=ke(r);const{requestOptions:u}=this.options,a=D({},u,t);return o&&m(o)&&(i=o(i,a)),i.requestOptions=a,i=this.supportFormData(i),new Promise((c,p)=>{this.axiosInstance.request(i).then(l=>{if(s&&m(s)){try{const d=s(l,a);c(d)}catch(d){p(d||new Error("request error!"))}return}c(l)}).catch(l=>{if(n&&m(n)){p(n(l,a));return}p(l)})})}}function X(e,r=!1){if(!e)return r?"":{};const t=new Date().getTime();return r?`?_t=${t}`:{_t:t}}const N=re(),At={beforeRequestHook:(e,r)=>{var c;const{apiUrl:t,urlPrefix:o,joinPrefix:s,joinParamsToUrl:n,joinTime:i=!0}=r;s&&(e.url=`${o}${e.url}`),t&&U(t)&&(e.url=`${t}${e.url}`);const u=e.params||{},a=e.data||!1;return((c=e.method)==null?void 0:c.toUpperCase())===C.GET?U(u)?(e.url=e.url+u+`${X(i,!0)}`,e.params=void 0):e.params=D(u||{},X(i,!1)):U(u)?(e.url=e.url+u,e.params=void 0):(Reflect.has(e,"data")&&e.data&&Object.keys(e.data).length>0?(e.data=a,e.params=u):(e.data=u,e.params=void 0),n&&(e.url=dt(e.url,D({},e.params,e.data)))),e},afterRequestHook:(e,r)=>{const{isTransformResponse:t,isReturnNativeResponse:o}=r;if(o)return e;if(!t)return e.data;const{data:s}=e;if(!s)throw new Error(S.apiRequestFailed);const{code:n,result:i,message:u}=s;if(n===pe.SUCCESS)return i;throw new Error(u||S.apiRequestFailed)},requestCatchHook(e,r){if(L.isAxiosError(e)){let{code:t,message:o}=e.toJSON();t==="ECONNABORTED"&&(o==null?void 0:o.indexOf("timeout"))!==-1&&(o=S.apiTimeoutMessage),o!=null&&o.includes("Network Error")&&(o=S.networkExceptionMsg)}return L.isCancel(e),e},requestInterceptors:e=>{var t;const r=st();return r&&((t=e==null?void 0:e.requestOptions)==null?void 0:t.withToken)!==!1&&(e.headers.Authorization=r),e},responseInterceptors:e=>e,requestInterceptorsCatch:e=>Promise.reject(e),responseInterceptorsCatch:e=>Promise.reject(e)};function he(e){return new Pt(b({timeout:10*1e3,headers:{"Content-Type":A.JSON},transform:be(At),requestOptions:{joinParamsToUrl:!1,isTransformResponse:!0,isReturnNativeResponse:!1,urlPrefix:N.VITE_GLOB_API_URL_PREFIX,joinPrefix:!0,errorMessageMode:"message",joinTime:!0,isCancelToken:!1,withToken:!0}},e||{}))}const j=he({requestOptions:{apiUrl:N.VITE_GLOB_API_URL}});he({requestOptions:{apiUrl:N.VITE_GLOB_API_URL_OTHER}});function wt(e){return j.post({url:"/login",params:e})}function Rt(){return j.get({url:"/getUserInfo"})}function Ut(){return j.get({url:"/logout"})}const fe=Z({id:"app-user",state:()=>({userInfo:null,token:null,roleList:[],sessionTimeout:!1,lastUpdateTime:0}),getters:{getUserInfo(){return this.userInfo||g(K)||{}},getToken(){return this.token||g(k)},getRoleList(){return this.roleList.length>0?this.roleList:g(W)},getSessionTimeout(){return!!this.sessionTimeout},getLastUpdateTime(){return this.lastUpdateTime}},actions:{setToken(e){this.token=e||"",y(k,e)},setRoleList(e){this.roleList=e,y(W,e)},setUserInfo(e){this.userInfo=e,this.lastUpdateTime=new Date().getTime(),y(K,e)},setSessionTimeout(e){this.sessionTimeout=e},login(e){return F(this,null,function*(){try{const r=yield wt(e);this.setToken(r.token);const t=yield Rt();return this.setUserInfo(t),this.setRoleList(t.roles.map(o=>o.value)),P.replace(t.homePath||v.BASE_HOME),Promise.resolve(t)}catch(r){return Promise.reject(r)}})},logout(e){return F(this,null,function*(){try{yield Ut()}catch(r){alert("\u6CE8\u9500 Token \u5931\u8D25")}this.setToken(null),this.setUserInfo(null),this.setSessionTimeout(!1),P.push(e||v.BASE_LOGIN)})}}});function kt(){return fe(te)}function _e(){const e=fe();function r(t,o=!0){return t?Ze(t)?Me(t,e.getRoleList).length>0:e.getRoleList.includes(t):o}return{hasPermission:r}}function bt(e,r){var s;const{hasPermission:t}=_e(),o=r.value;!o||t(o)||(s=e.parentNode)==null||s.removeChild(e)}const Mt=(e,r)=>{bt(e,r)},xt={mounted:Mt};function Nt(e){e.directive("auth",xt)}function jt(e){Nt(e)}function Gt(e){const r=kt(),{hasPermission:t}=_e();e.beforeEach((o,s,n)=>F(this,null,function*(){if(o.meta.ignoreAuth){n();return}if(!r.getToken){n({path:v.BASE_LOGIN,replace:!0,query:{redirect:o.path}});return}if(!t(o.meta.roles)){const i=window.confirm("\u65E0\u6743\u9650\u8BBF\u95EE\uFF0C\u5207\u6362\u8D26\u53F7?");n(i?{path:v.BASE_LOGIN,replace:!0,query:{redirect:s.path}}:{path:s.path,replace:!0})}n()}))}function qt(e){Gt(e)}function Vt(){return F(this,null,function*(){const e=xe(qe);Ve(e),ct(),mt(e),jt(e),Dt(e),qt(P),e.mount("#app")})}Vt();export{I as R,ee as _,_e as a,fe as u};
